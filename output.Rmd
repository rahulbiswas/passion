---
title: "Ecological Statistical Analysis"
output:
  html_document:
    theme: flatly
    toc: true
    toc_float: true
    df_print: paged
---

```{r, include=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(knitr)
library(kableExtra)

# Load data
climate <- read.csv("climatedata.csv")

# Summary function
summary_table <- function(df, var) {
  quant <- quantile(df[[var]], probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
  tibble(
    min = quant[1],
    p25 = quant[2],
    p50 = quant[3],
    p75 = quant[4],
    max = quant[5]
  )
}
```

```{r results, echo=FALSE, results='asis'}
# C3 vs C4 Summary
c3c4_summary <- climate %>%
  count(C3C4) %>%
  mutate(PERCENT = round(100 * n / sum(n))) %>%
  rename(COUNT = n)

cat("## C3 vs C4 Summary\n\n")
print(kable(c3c4_summary, caption = "C3 vs C4 Distribution") %>%
        kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = F))

# Trait summaries
traits <- c("MAP", "LL", "LW", "LA", "CH")

for (trait in traits) {
  cat(paste0("## ", trait, " Quantile Summary\n\n"))
  table <- summary_table(climate, trait)
  print(kable(table, caption = paste(trait, "Quantile Summary")) %>%
          kable_styling(bootstrap_options = c("striped", "hover"), full_width = F))
}
```
